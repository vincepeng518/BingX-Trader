<!DOCTYPE html>
<html>
<head>
    <title>XAUT 強化馬丁</title>
    <meta http-equiv="refresh" content="5">
    <style>body {font-family: Arial; padding: 20px; background: #000; color: #0f0;}</style>
</head>
<body>
    <h1>XAUT/USDT 強化馬丁格爾</h1>
    <h2 id="status">載入中...</h2>
    <p>目前價格: <span id="price">-</span></p>
    <p>持倉數量: <span id="size">-</span> (共 <span id="count">0</span> 筆)</p>
    <p>總盈虧: <span id="pnl">-</span> USDT</p>
    <hr>
    <h3>最近交易</h3>
    <ul id="trades"></ul>

    <script>
        function update() {
            fetch('/api/data').then(r => r.json()).then(d => {
                document.getElementById('status').innerText = d.status;
                document.getElementById('price').innerText = d.price.toFixed(2);
                document.getElementById('size').innerText = d.long_size.toFixed(4);
                document.getElementById('count').innerText = d.entries.length;
                document.getElementById('pnl').innerText = d.total_pnl.toFixed(2);

                let list = document.getElementById('trades');
                list.innerHTML = '';
                d.trades.slice(-10).reverse().forEach(t => {
                    let li = document.createElement('li');
                    li.innerText = t;
                    list.appendChild(li);
                });
            });
        }
        setInterval(update, 5000);
        update();
    </script>
</body>
</html>